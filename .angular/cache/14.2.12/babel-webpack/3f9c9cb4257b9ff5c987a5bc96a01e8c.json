{"ast":null,"code":"import * as moment from 'moment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../ContainerComponent/Container.component\";\n\nfunction BookAppointmentComponent_p_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"Consultation Booked! Thank you\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookAppointmentComponent_p_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \" Unable to book Consultation, Call to book or try again later. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BookAppointmentComponent_form_11_option_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const service_r10 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", service_r10);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", service_r10, \" \");\n  }\n}\n\nconst _c0 = function () {\n  return {\n    color: \"red\"\n  };\n};\n\nfunction BookAppointmentComponent_form_11_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1, \" Name is required. \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\n\nfunction BookAppointmentComponent_form_11_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1, \" Phone number is required \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\n\nfunction BookAppointmentComponent_form_11_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1, \" Please format number correctly example. 123 456 7891 \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\n\nfunction BookAppointmentComponent_form_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 8, 9);\n    i0.ɵɵlistener(\"submit\", function BookAppointmentComponent_form_11_Template_form_submit_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n\n      const _r3 = i0.ɵɵreference(1);\n\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.handleConsultationForm(_r3));\n    });\n    i0.ɵɵelementStart(2, \"label\", 10);\n    i0.ɵɵtext(3, \"Category\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"select\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function BookAppointmentComponent_form_11_Template_select_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.defaultCategory = $event);\n    });\n    i0.ɵɵelementStart(5, \"option\", 12);\n    i0.ɵɵtext(6, \"Insurance\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"label\", 13);\n    i0.ɵɵtext(8, \"Services\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"select\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function BookAppointmentComponent_form_11_Template_select_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.defaultService = $event);\n    });\n    i0.ɵɵtemplate(10, BookAppointmentComponent_form_11_option_10_Template, 2, 2, \"option\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"label\", 16);\n    i0.ɵɵtext(12, \"Agent\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"select\", 17);\n    i0.ɵɵlistener(\"ngModelChange\", function BookAppointmentComponent_form_11_Template_select_ngModelChange_13_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.defaultAgent = $event);\n    });\n    i0.ɵɵelementStart(14, \"option\", 18);\n    i0.ɵɵtext(15, \"Caroline Opurum\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"label\", 19);\n    i0.ɵɵtext(17, \"Consultation date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"input\", 20);\n    i0.ɵɵlistener(\"ngModelChange\", function BookAppointmentComponent_form_11_Template_input_ngModelChange_18_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.defaultAppointmentTime = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"label\", 21);\n    i0.ɵɵtext(20, \"Full Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(21, BookAppointmentComponent_form_11_div_21_Template, 2, 2, \"div\", 22);\n    i0.ɵɵelement(22, \"input\", 23, 24);\n    i0.ɵɵelementStart(24, \"label\", 25);\n    i0.ɵɵtext(25, \"Phone number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(26, BookAppointmentComponent_form_11_div_26_Template, 2, 2, \"div\", 22);\n    i0.ɵɵtemplate(27, BookAppointmentComponent_form_11_div_27_Template, 2, 2, \"div\", 22);\n    i0.ɵɵelement(28, \"input\", 26, 27);\n    i0.ɵɵelementStart(30, \"button\", 28);\n    i0.ɵɵtext(31);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const _r3 = i0.ɵɵreference(1);\n\n    const _r6 = i0.ɵɵreference(23);\n\n    const _r9 = i0.ɵɵreference(29);\n\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.defaultCategory);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.defaultService);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.services);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.defaultAgent);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.defaultAppointmentTime)(\"min\", ctx_r2.defaultAppointmentTime);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", (_r6.errors == null ? null : _r6.errors[\"required\"]) && (_r6.dirty || _r6.touched));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", (_r9.errors == null ? null : _r9.errors[\"required\"]) && (_r9.dirty || _r9.touched));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (_r9.errors == null ? null : _r9.errors[\"pattern\"]) && (_r9.dirty || _r9.touched));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", !_r3.valid || ctx_r2.booking);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.booking ? \"Booking\" : \"Submit\", \" \");\n  }\n}\n\nexport let BookAppointmentComponent = /*#__PURE__*/(() => {\n  class BookAppointmentComponent {\n    constructor(http) {\n      this.http = http;\n      this.ConsultationBooked = false;\n      this.booking = false;\n      this.serverError = false;\n      this.formErrors = {};\n      this.defaultService = 'Life Insurance';\n      this.defaultCategory = 'Insurance';\n      this.defaultAgent = 'Caroline Opurum';\n      this.defaultAppointmentTime = moment().add(1, 'hours').format().slice(0, 16);\n      this.services = ['Life Insurance', 'Health Insurance', 'Dental and vision Insurance', 'Disability Insurance', 'Retirement plans', 'Accident Insurance', 'Mortgage Protection'];\n    }\n\n    handleConsultationForm(form) {\n      this.booking = true;\n      const fullnameField = form.form.controls['fullname'];\n\n      if (!fullnameField.value.trim()) {\n        fullnameField.setErrors({\n          required: 'Name is Required'\n        });\n        this.booking = false;\n        return;\n      }\n\n      if (form.valid) {\n        console.log(form.value);\n        this.http.post('/api/consulation/create', form.value).subscribe({\n          next: response => {\n            this.booking = false;\n            this.ConsultationBooked = true;\n            form.form.reset();\n          },\n          error: e => {\n            this.serverError = true;\n            this.ConsultationBooked = false;\n          }\n        });\n      }\n    }\n\n  }\n\n  BookAppointmentComponent.ɵfac = function BookAppointmentComponent_Factory(t) {\n    return new (t || BookAppointmentComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n  };\n\n  BookAppointmentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BookAppointmentComponent,\n    selectors: [[\"Consultations\"]],\n    decls: 12,\n    vars: 3,\n    consts: [[1, \"page_container\"], [1, \"section_header\"], [1, \"section_container\"], [1, \"image_container\"], [\"src\", \"../../../assets/images/consultation.webp\", 1, \"image\"], [1, \"form_container\"], [4, \"ngIf\"], [\"class\", \"appointment_form\", 3, \"submit\", 4, \"ngIf\"], [1, \"appointment_form\", 3, \"submit\"], [\"form\", \"ngForm\"], [\"for\", \"category\"], [\"id\", \"category\", \"name\", \"category\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"Insurance\"], [\"for\", \"service\"], [\"id\", \"service\", \"name\", \"service\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"Agent\"], [\"id\", \"Agent\", \"name\", \"agent\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"Caroline Opurum\"], [\"for\", \"appointment_time\"], [\"id\", \"appointment_time\", \"type\", \"datetime-local\", \"name\", \"consultation_time\", 3, \"ngModel\", \"min\", \"ngModelChange\"], [\"for\", \"fullname\"], [3, \"ngStyle\", 4, \"ngIf\"], [\"id\", \"fullname\", \"type\", \"text\", \"placeholder\", \"John Doe\", \"required\", \"\", \"name\", \"fullname\", \"ngModel\", \"\"], [\"fullname\", \"ngModel\"], [\"for\", \"phone number\"], [\"id\", \"phone number\", \"type\", \"tel\", \"required\", \"\", \"placeholder\", \"914 171 1222\", \"name\", \"phonenumber\", \"pattern\", \"[0-9]{3} [0-9]{3} [0-9]{4}\", \"maxlength\", \"12\", \"ngModel\", \"\"], [\"phonenumber\", \"ngModel\"], [1, \"submit_btn\", 3, \"disabled\"], [3, \"ngValue\"], [3, \"ngStyle\"]],\n    template: function BookAppointmentComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"container\")(2, \"div\", 1)(3, \"h1\");\n        i0.ɵɵtext(4, \"Book consultation now!\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 2)(6, \"div\", 3);\n        i0.ɵɵelement(7, \"img\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 5);\n        i0.ɵɵtemplate(9, BookAppointmentComponent_p_9_Template, 2, 0, \"p\", 6);\n        i0.ɵɵtemplate(10, BookAppointmentComponent_p_10_Template, 2, 0, \"p\", 6);\n        i0.ɵɵtemplate(11, BookAppointmentComponent_form_11_Template, 32, 11, \"form\", 7);\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngIf\", ctx.ConsultationBooked);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.serverError && !ctx.ConsultationBooked);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.ConsultationBooked);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i2.NgStyle, i3.ɵNgNoValidate, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.MaxLengthValidator, i3.PatternValidator, i3.NgModel, i3.NgForm, i4.ContainerComponent],\n    styles: [\".section_header[_ngcontent-%COMP%]{text-align:center;color:#68a0fc;margin-bottom:20px;margin-top:20px}.section_header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:300}.appointment_form[_ngcontent-%COMP%]{text-align:center}.appointment_form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{display:block;padding:15px 5px;font-size:19px;border-radius:3px;border:.3px solid #68a0fc;color:#68a0fc;margin:0 auto;width:400px}label[_ngcontent-%COMP%]{font-size:20px;margin-bottom:10px}.section_container[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex-wrap:wrap}.image_container[_ngcontent-%COMP%]{border-radius:5px;overflow:hidden}.image[_ngcontent-%COMP%]{width:500px;height:500px;object-fit:cover}.submit_btn[_ngcontent-%COMP%]{background-color:#68a0fc;width:120px;height:40px;color:#fff;text-decoration:none;border-radius:5px;border:none;align-self:center;cursor:pointer;margin-top:10px}.submit_btn[_ngcontent-%COMP%]:disabled{background-color:#d3d3d3;cursor:not-allowed}.form_container[_ngcontent-%COMP%]{align-self:center}.form_container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:25px}\"]\n  });\n  return BookAppointmentComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}